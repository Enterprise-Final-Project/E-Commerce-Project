<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="fragments/header :: header">
    <title>Past Orders</title>
</head>
<body>
<!-- Include the navbar -->
<div th:replace="fragments/navbar :: navbar"></div>
<h1>Order History</h1>
<!--- if there are no orders show error message --->
<div th:if="${orders == null || orders.size() == 0}">
    <p>No orders found. Start shopping now!</p>
</div>

<!--- order histroy --->


<div th:if="${orders != null}">
<table th:if="${orders.size() > 0}">>
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Order Date</th>
        <th>Total</th>
        <th>Order Status</th>
        <th>Details</th>
    </tr>
    </thead>
    <tbody>
    <!-- get list of orders-->
    <tr th:each="order : ${orders}">
        <td th:text="${order.getOrderID()}"></td>
        <td th:text="${#dates.format(order.getOrderDate(), 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${order.getTotalAmount()}"></td>
        <td th:text="${order.getStatus()}"></td>
        <td>
            <a th:href="@{/past_order_details/{id}(id=${order.getOrderID()})}">View Details</a>
        </td>
    </tr>
    </tbody>
</table>
</div>
<!-- Include the footer -->
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>